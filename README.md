# BakeCake — чат-бот для продажи тортов
Проект представляет собой Telegram-бота для оформления заказов на торты. Пользователи могут выбрать форму, начинку, декор и размер торта, а бот рассчитает итоговую стоимость и сохранит заказ. 
Для удобства реализована генерация коротких ссылок через VK API, а также подсчет статистики по ним.

## Функциональность бота
* Выбор параметров торта:
    * форма, начинка, декор, размер;
    * бот показывает изображения и описание вариантов.
* Автоматический расчет цены — сумма формируется на основе выбранных параметров.
* Оформление заказа — пользователь оставляет контактные данные, которые сохраняются в базе данных.
* Генерация коротких ссылок (VK API) — для приглашения друзей или рекламы; есть статистика переходов.
* Админ-панель Django — администратор может добавлять новые торты, редактировать опции и смотреть заказы.
* Работа с изображениями — показ вариантов декора и форм тортов через Pillow.
* Статистика заказов и переходов — хранение и просмотр данных о клиентах

## Как установить
### 1. Установка зависимостей
Убедитесь, что установлен Python 3.12.6. Затем используйте pip для установки зависимостей:
```
pip install -r requirements.txt
```
### 2. Настройка переменных окружения
В проекте используется библиотека `python-dotenv` для хранения конфиденциальных данных.

Создайте файл .env в корне проекта и добавьте туда:
```text
TELEGRAM_BOT_TOKEN=токен_вашего_бота
VK_ACCESS_TOKEN=токен_VK_API
DEBUG=1
```
* TELEGRAM_BOT_TOKEN — токен бота, выданный [BotFather](https://t.me/BotFather)
* VK_ACCESS_TOKEN — токен доступа к VK API (используется для генерации коротких ссылок и сбора статистики).
* DEBUG — режим отладки (1 — включен, 0 — выключен).
#### Получение VK токена 
Для того чтобы программа работала с API VK необходимо создать и настроить приложение, перейдите по ссылке [Создание приложения VK](https://id.vk.com/about/business/go/docs/ru/vkid/latest/vk-id/connection/create-application#Sozdanie-prilozheniya)
и следуйте инструкции. При регистрации приложения укажите:
- Тип приложения - Web;
- Базовый домен - example.com;
- Доверенный Redirect URL - https://example.com.

В разделе 'Доступы' вашего приложения, активируйте:
- Стена;
- Сообщества;
- Документы;
- Фотографии.

Так же в настройках, во вкладке 'Разделы' в группах ВКонтакте, активируйте доступ:
- Файлы;
- Фото;
- Посты.

Для того чтобы получить VK_ACCESS_TOKEN, перейдите по ссылке ниже, подставив в параметр client_id вместо `...`
ID своего приложения VK: 
```text
oauth.vk.com/oauth/authorize?client_id=...&display=page&scope=wall,groups,photos,docs&response_type=token&v=5.199&state=123456
```
В окне 'Вход с помощью VK ID' выберите продолжить. После разрешения доступа вы будете перенаправлены на страницу
в адресной строке которой будет содержаться `access_token=` вида `vk.1.axTHGNkdjfls533bacf01e1165b57531ad114461ae8736d6506a3`
скопируйте его до символа `&`, сохраните в .env файл под именем VK_ACCESS_TOKEN.

## Запуск проекта

Для запуска бота используйте:
```
python manage.py runserver & python manage.py bot
```
Или же второй способ запуск в двух терминалах (простой способ)

Открываете два окна/вкладки терминала:

в первой вкладке:
```
python manage.py runserver
```
во второй вкладке:
```
python manage.py bot
```
После этого бот начнет принимать заказы в Telegram.

